#!/usr/bin/env dash

img=$1
lock=$2

if test -z "${img}"
then
  echo "Error: No argument provided. Please provide image file path."
  exit 1
fi

# Setting up frequently used wallpapers
case $img in
  "pinetrees")
    img=$HOME/Pictures/Wallpapers/pinetrees.png
    ;;
  "hydrangea")
    img=$HOME/Pictures/Wallpapers/konohanakitan_hydrangea.jpg
    ;;
  "oldbridge")
    img=$HOME/Pictures/Wallpapers/old-bridge-intothedistance.jpg
    ;;
esac

/usr/bin/notify-send "Running: wal-it"

echo "Running: wal"
$HOME/.local/bin/wal -i "${img}" -g

echo "\nRunning: wal-steam"
$HOME/.local/bin/wal-steam -w

echo "\nRunning: wal-vis"
$HOME/.bin/wal-vis

echo -n "\nRefreshing bspwm colors"
sh -c "$HOME/.config/bspwm/bspwm-colors.sh &"
echo ": Done"

echo -n "Refreshing lemonbar"
sh -c "$HOME/.bin/refresh-indicators.sh"
echo ": Done"

if [ "$lock" = "lock" ]
then
  echo "\nRunning: betterlockscreen -u"
  /usr/bin/betterlockscreen -u "${img}"
fi

sleep 0.5
/usr/bin/notify-send "Completed: wal-it"
